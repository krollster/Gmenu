// GMenu v0.4 - jQuery Plugin - Copyright (c) 2012 Benjamin Kroll; Dual licensed under the MIT and GPL licenses. Uses the same license as jQuery, see: http://docs.jquery.com/License
(function($)
{$.fn.gmenu=function(options)
{var settings={from:4,filter:'',wrapper:$('<li><a href="#" class="more">more</a></li>'),menu:$('<ul class="sub"></ul>'),target:$(this),placement:'inside'}
options=$.extend({},settings,options);return this.each(function(index)
{var $this=$(this);var $children=$this.children(options.filter);var child_count=$children.length;var $slice=$children.slice(options.from);var $output;var objs={'wrapper':{type:typeof options.wrapper,$el:options.wrapper},'menu':{type:typeof options.menu,$el:options.menu},'target':{type:typeof options.target,$el:options.target}};$this.prepElements=function()
{$.each(objs,function(key,obj)
{if(obj.type=='string')
{objs[key].$el=$(options[key]);}
else if(obj.type=='object'&&(key!=='target'))
{objs[key].$el=options[key].clone();}
else if(obj.type=='object'&&(key=='target')&&obj.$el.is($this))
{objs[key].$el=$this;}});}
$this.prepOutput=function()
{if(objs.wrapper.$el&&objs.menu.$el)
{$output=objs.wrapper.$el.append(objs.menu.$el.append($slice));}
else if(objs.wrapper.$el&&!objs.menu.$el)
{$output=objs.wrapper.$el.append($slice);}
else if(!objs.wrapper.$el&&objs.menu.$el)
{$output=objs.menu.$el.append($slice);}
else
{$output=$slice;}}
$this.moveOutput=function()
{var $t=objs.target.$el;switch(options.placement)
{case'prepend':$t.prepend($output);break;case'after':$t.after($output);break;case'before':$t.before($output);break;default:$t.append($output);break;}}
if(child_count>options.from)
{$this.prepElements();$this.prepOutput();$this.moveOutput();}});};})(jQuery);